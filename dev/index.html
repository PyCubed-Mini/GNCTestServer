<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · SatellitePlayground.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>SatellitePlayground.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Package-Features"><span>Package Features</span></a></li><li><a class="tocitem" href="#Quick-Start-(Magnetorquer-Detumbling-Simulation-Example)"><span>Quick Start (Magnetorquer Detumbling Simulation Example)</span></a></li></ul></li><li><a class="tocitem" href="api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/PyGNC/SatellitePlayground.jl/blob/main/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="SatellitePlayground.jl"><a class="docs-heading-anchor" href="#SatellitePlayground.jl">SatellitePlayground.jl</a><a id="SatellitePlayground.jl-1"></a><a class="docs-heading-anchor-permalink" href="#SatellitePlayground.jl" title="Permalink"></a></h1><p>SatellitePlayground.jl is made for testing Guidance, Navigation, and Control software for cubesats. It is both for software in the loop testing and for testing just the specific GNC software.</p><h2 id="Package-Features"><a class="docs-heading-anchor" href="#Package-Features">Package Features</a><a id="Package-Features-1"></a><a class="docs-heading-anchor-permalink" href="#Package-Features" title="Permalink"></a></h2><ul><li>Detailed satellite dynamics model including with the following perturbations<ul><li>Attitude: gravity gradient, magnetic torque, solar radiation pressure, aerodynamic drag</li><li>Orbit: spherical harmonic gravity, atmospheric drag, solar radiation pressure, third body from the sun and moon</li></ul></li><li>Ability to easily turn on and off perturbations</li><li>Simulation with thrusters, reaction wheel, or magnetic torquers for control</li><li>Explicitly defined measurement functions for adding error models</li><li>Testing of GNC software implementations</li><li>Software in the loop testing via a shared memory interface provided by GNCTestClient.py + this package.</li></ul><h2 id="Quick-Start-(Magnetorquer-Detumbling-Simulation-Example)"><a class="docs-heading-anchor" href="#Quick-Start-(Magnetorquer-Detumbling-Simulation-Example)">Quick Start (Magnetorquer Detumbling Simulation Example)</a><a id="Quick-Start-(Magnetorquer-Detumbling-Simulation-Example)-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-Start-(Magnetorquer-Detumbling-Simulation-Example)" title="Permalink"></a></h2><p>In this example we&#39;ll write a simple detumbling test enviorment. First install the <code>SatellitePlayground</code> package, for ease of use, we&#39;ll define <code>SP=SatellitePlayground</code></p><pre><code class="language-julia hljs">using SatellitePlayground
SP = SatellitePlayground</code></pre><p>To run a simulation with default parameters, one must supply a control function. To start we&#39;ll make a <code>no_control</code> function. By default <code>measurement</code> is a tuple of <code>(state, environment)</code>.</p><pre><code class="language-julia hljs">function no_control(measurement)
    return zero(SP.Control)
end</code></pre><p>To run this simulation simply run</p><pre><code class="language-julia hljs">(hist, time) = SP.simulate(no_control)</code></pre><p>Hist will contain an array of the state at each time step, and time will contain an array of the time at each time step. We can plot the angular velocity over time with the following code.</p><pre><code class="language-julia hljs">using Plots
using LinearAlgebra # for norm
hist = [[state.angular_velocity; norm(state.angular_velocity)] for state in hist]
hist = SP.vec_to_mat(hist)
plot(time, hist, title=&quot;Angular Velocity&quot;, xlabel=&quot;Time (s)&quot;, ylabel=&quot;Angular Velocity (rad/s)&quot;, labels=[&quot;ω1&quot; &quot;ω2&quot; &quot;ω3&quot; &quot;||ω||&quot;])</code></pre><p>This will result in a plot that is close to, but not exactly cyclic. This is because by default the simulation uses a model of the pycubed-mini satellite, with environmental perturbations enabled. <img src="media/perturbations.svg" alt="Perturbations cause the components of the angular velocity not to be perfectly cyclic"/></p><p>By default this simulation will run for 1000 iterations. However, you change change this by setting <code>max_iterations</code>, or <code>terminal_condition</code>.</p><p>In our case we will set increase the number of maximum iterations to 10,000, and make the simulation terminate once the angular velocity drops below 0.01 radians.</p><pre><code class="language-julia hljs">function terminate(state::RBState, env::Environment, i::Int)
    return norm(state.angular_velocity) &lt; 0.01
end
(hist, time) = SP.simulate(no_control, max_iterations=10_000, terminal_condition=terminate)</code></pre><p>We will now use the b-cross controller to detumble the satellite.</p><pre><code class="language-julia hljs">function bcross_controller(measurement)
    (ω, b) = measurement

    b̂ = b / norm(b)
    k = 7e-4
    M = -k * (I(3) - b̂ * b̂&#39;) * ω
    m = 1 / (dot(b, b)) * cross(b, M)
    return SP.Control(
        m
    )
end</code></pre><p>To demonstrate measurement functions (which are intended for adding error models), we will write a measurement function that returns a measurement of the form <code>(angular_velocity, b)</code>, rather than the default <code>(state, environment)</code>.</p><pre><code class="language-julia hljs">function measure(state, environment)
    return (state.angular_velocity, environment.b)
end</code></pre><p>Finally, we will run the simulation with the new controller and measurement function. This simulation will run for 10,000 iterations, or until the angular velocity drops below 0.01 radians. </p><pre><code class="language-julia hljs">(hist, time) = SP.simulate(bcross_controller, max_iterations=10_000, terminal_condition=terminate, measure=measure)</code></pre><p>This produces a plot similar to the following, which shows the satellite very slowly detumbling. This is primarily due to control limits being taken into account.</p><p><img src="media/control_limit_detumble.svg" alt="Perturbations cause the components of the angular velocity not to be perfectly cyclic"/></p><p>We can remove the magnetic dipole limits via</p><pre><code class="language-julia hljs">no_limit_pqmini_model = copy(SP.pqmini_model)
no_limit_pqmini_model.control_limit = [Inf, Inf, Inf]
(hist, time) = SP.simulate(bcross_controller, max_iterations=10_000, terminal_condition=terminate, measure=measure, model=no_limit_pqmini_model)</code></pre><p>This produces results similar to the following, which shows the satellite detumbling much faster, yet still exhibits some oscillations caused by perturbations.</p><p><img src="media/perturbation_detumble.svg" alt="Pertubations cause minor oscillations in the angular velocity while detumbling"/></p><p>We can run the simulations withouth pertubations on attitude via</p><pre><code class="language-julia hljs">env = copy(SP.default_environment)
env.config = SP.EnvironmentConfig(
    include_drag=false,
    include_solar_radiation_pressure=false,
    include_gravity_gradient_torque=false
)
(hist, time) = SP.simulate(bcross_controller, max_iterations=10_000, terminal_condition=terminate, 
    measure=measure, model=no_limit_pqmini_model, environment=env)</code></pre><p>This should produce results similar to the following</p><p><img src="media/detumble_1.svg" alt="Angular Velocity over time with a detumbling controller"/> <img src="media/detumble_2.svg" alt="Angular Velocity over time with a detumbling controller"/> <img src="media/detumble_3.svg" alt="Angular Velocity over time with a detumbling controller"/></p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="api/">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Monday 11 September 2023 00:38">Monday 11 September 2023</span>. Using Julia version 1.8.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
